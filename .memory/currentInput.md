Техническое Задание: Визуализатор "Magic Guitar"
Общая Концепция: Интерактивный WebGL-визуализатор для игры на гитаре (или "читарии"), создающий магическую и гипнотизирующую атмосферу. Основной акцент делается на динамической реакции струн и фона на аудиовход, с добавлением уникальных визуальных эффектов "призраков" струн.

Цель: Создать визуально привлекательный и функциональный инструмент для усиления эффекта от игры на гитаре, превращая аудио в завораживающее визуальное представление.

Технологии:

Основной рендеринг: Three.js (WebGL)

Анализ аудио: Web Audio API

UI/UX: HTML/CSS (для навигации и настроек), GSAP (для плавных переходов)

Шейдеры: GLSL (для продвинутых визуальных эффектов)

I. Компоновка Сцены (UI/UX)

Сцена на Весь Экран:

WebGL-канвас занимает 100% ширины и высоты окна браузера.

Все элементы Three.js рендерятся в этом канвасе.

Заголовок "Magic Guitar" и Аккорд:

Расположен по центру верхней части экрана.

Текст аккорда (например, "Am") отображается под заголовком, меняется в зависимости от распознанного аккорда (если функция будет реализована).

Элементы выполнены с мягким свечением и легкой анимацией (например, пульсация или subtle scale on hover).

Кнопка Настроек:

Расположена в правом верхнем углу.

Иконка (шестеренка или аналогичная).

При нажатии открывается оверлей с настройками (прозрачность призраков, интенсивность свечения, цветовая палитра — опционально на будущие итерации).

Струны (Центральная Часть):

Шесть горизонтальных линий (струн), занимающих примерно 50% высоты экрана.

Равномерно распределены по вертикали в центральной части.

Отвечают за основную анимацию.

Частотный Спектр (Нижняя Часть):

Занимает нижнюю часть экрана (примерно 20-25% высоты).

Непрерывный, плавный, растворяющийся к краям и вниз.

Визуализирует общий аудиосигнал.

II. Анимации и Визуальные Эффекты

Фоновая Анимация (Ненавязчивая):

Медленно движущиеся, полупрозрачные, размытые частицы (или мягкие, переливающиеся градиенты), создающие эффект космической пыли или туманности.

Цветовая палитра: глубокие фиолетовые, синие и розовые оттенки.

Интенсивность анимации может быть очень subtle, лишь слегка "дышать" в такт общей громкости (RMS).

Анимация Колебания Струн:

Каждая струна реагирует на свою соответствующую частотную полосу из аудиоанализатора (например, нижние струны на низкие частоты, верхние на высокие).

Колебание смоделировано как волнообразное движение с затуханием:

Форма волны: Синусоидальная или более сложная, имитирующая физическое колебание струны.

Амплитуда: Зависит от интенсивности аудиосигнала в соответствующей частотной полосе.

Частота колебаний: Динамическая, возможно, связанная с высотой ноты, либо постоянная для эстетики.

Затухание: Плавное уменьшение амплитуды колебаний после "удара" по струне.


Использование Vertex Shaders для деформации геометрии струн.

Эффект "Призраков" Колеблющихся Струн:

Концепция: Каждая активно колеблющаяся струна оставляет за собой 2-3 полупрозрачных, менее ярких копии (призрака), которые повторяют её движение с небольшой задержкой.

Визуализация: Призраки должны быть менее насыщенными по цвету, более прозрачными и с более быстрым затуханием.
Возможно анимация затухания призрака похожа да движение дыма замедленное, с помощью экспоненциального затухания.


Реализация:

Использование FBO (Frame Buffer Object) для захвата предыдущих состояний струн.

Или создание нескольких Mesh объектов для каждой струны, с разной задержкой анимации и альфа-каналом (прозрачностью), управляемым в шейдере.

Эффект Bloom/Glow: Яркие струны и их призраки должны иметь мягкое свечение.

Частотный Спектр (Непрерывный и Растворяющийся):

Форма: Вместо дискретных столбиков — плавный, "завихряющийся" контур.

Растворение:

Вертикальное: Градиент прозрачности, растворяющийся к нижней части экрана.

Горизонтальное: Растворение к левому и правому краям экрана.

Анимация: Динамическая реакция на аудиоданные analyser.getByteFrequencyData(), но с сильной интерполяцией (lerp) для плавности.

Цвет: Согласуется с общей магической палитрой (фиолетовый, синий, розовый).

Использование BufferGeometry и Fragment Shader для рисования и эффекта растворения.

Оверлей Аккордов:

Когда аккорд распознается, его название (например, "Am") плавно появляется над соответствующими струнами (возможно, в небольшой группе, указывающей на конкретную октаву/позицию).

Имеет мягкое свечение и плавно исчезает через несколько секунд.

Использование TextGeometry с материалом, поддерживающим эффект свечения и прозрачности.
