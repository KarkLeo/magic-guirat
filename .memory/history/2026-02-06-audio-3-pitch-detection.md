# AUDIO-3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∏—Ç—á–∞ (Essentia.js)

**–î–∞—Ç–∞:** 2026-02-06
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**Sprint:** Sprint 1 MVP
**User Story:** US-1.2

---

## –ó–∞–¥–∞—á–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∏—Ç—á–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Essentia.js –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–≥—Ä—ã –Ω–∞ –≥–∏—Ç–∞—Ä–µ.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è pitch detection –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- [x] –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –¥–ª—è –≥–∏—Ç–∞—Ä–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (82-1200 Hz)
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ—Ç—ã –∏–∑ —á–∞—Å—Ç–æ—Ç—ã
- [x] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —à—É–º–∞

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. Composable: `src/composables/usePitchDetector.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Essentia.js WebAssembly (async)
- PitchYinFFT –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –º–æ–Ω–æ—Ñ–æ–Ω–∏–∏
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è spectrum (Float32Array) –∏–∑ AnalyserNode
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞: minFrequency 82 Hz, maxFrequency 1200 Hz
- Confidence threshold 0.8 (80%)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã ‚Üí –Ω–æ—Ç–∞ —Å —Ü–µ–Ω—Ç–∞–º–∏
- Real-time –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ requestAnimationFrame
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

**API:**
```javascript
const {
  detectedPitch,      // Hz (0 –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
  pitchConfidence,    // 0-1
  detectedNote,       // { note, octave, cents }
  isAnalyzing,        // Boolean
  isEssentiaLoaded,   // Boolean
  essentiaError,      // String | null
  startDetection,     // Function
  stopDetection,      // Function
  getDetectorInfo,    // Function
  MIN_FREQUENCY,      // 82 Hz
  MAX_FREQUENCY,      // 1200 Hz
  CONFIDENCE_THRESHOLD // 0.8
} = usePitchDetector(analyserNode)
```

**Essentia.js Integration:**
```javascript
import { Essentia, EssentiaWASM } from 'essentia.js'

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
essentia = new Essentia(EssentiaWASM)
await EssentiaWASM.ready

// PitchYinFFT –≤—ã–∑–æ–≤
const spectrum = convertToFloat32Array(analyserData)
const result = essentia.PitchYinFFT(spectrum, {
  frameSize: 2048,
  sampleRate: audioContext.sampleRate,
  minFrequency: 82,
  maxFrequency: 1200,
  interpolate: true,
  tolerance: 1
})
// result: { pitch: Hz, pitchConfidence: 0-1 }
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `src/components/AudioAnalyzerView.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω usePitchDetector –≤ computed —Å analyserNode
- Watch –¥–ª—è isCapturing ‚Üí –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ pitch detection
- –ü–µ—Ä–µ–¥–∞—á–∞ pitch –¥–∞–Ω–Ω—ã—Ö –≤ FrequencySpectrumVisualizer —á–µ—Ä–µ–∑ props

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```vue
<script setup>
// Audio capture
const { isCapturing, getAnalyserNode, ... } = useAudioCapture()
const analyserNode = computed(() => getAnalyserNode())

// Pitch detection
const pitchDetector = computed(() =>
  analyserNode.value ? usePitchDetector(analyserNode.value) : null
)

// Watch –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
watch(isCapturing, (capturing) => {
  if (capturing && pitchDetector.value) {
    setTimeout(() => pitchDetector.value.startDetection(), 100)
  }
})
</script>
```

### 3. UI: `src/components/FrequencySpectrumVisualizer.vue`

**–ù–æ–≤—ã–µ props:**
```javascript
props: {
  detectedPitch: Number,        // Essentia pitch
  pitchConfidence: Number,      // 0-1
  detectedNote: Object,         // { note, octave, cents }
  isEssentiaLoaded: Boolean,    // WASM –∑–∞–≥—Ä—É–∂–µ–Ω?
  // ... existing props
}
```

**–ù–æ–≤—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- **Essentia Badge:** "‚ú® Essentia.js" –∏–ª–∏ "‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞..."
- **Confidence Badge:** –ü—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (80-100%)
- **Method Label:** "FFT" –¥–ª—è fallback
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Essentia pitch ‚Üí FFT frequency ‚Üí –¢–∏—à–∏–Ω–∞

**–õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
```javascript
// 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Essentia pitch
if (detectedPitch > 0 && pitchConfidence > 0) {
  show Essentia pitch + confidence badge
}
// 2. Fallback: FFT frequency
else if (dominantFrequency > 0) {
  show FFT frequency + "FFT" label
}
// 3. –¢–∏—à–∏–Ω–∞
else {
  show "–¢–∏—à–∏–Ω–∞..."
}
```

**–ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏:**
- `.essentia-badge` - –≥—Ä–∞–¥–∏–µ–Ω—Ç #667eea ‚Üí #764ba2
- `.essentia-badge.loading` - pulse –∞–Ω–∏–º–∞—Ü–∏—è
- `.confidence-badge` - —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- `.method-label` - –º–µ—Ç–∫–∞ "FFT"
- `.dominant-info.fallback` - –±–ª–µ–∫–ª—ã–π —Ü–≤–µ—Ç –¥–ª—è FFT

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### PitchYinFFT Algorithm

**YIN (Yin Isn't perfect):**
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è autocorrelation
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–Ω–æ—Å—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–ø–æ–ª–∞—Ü–∏—è –¥–ª—è —Å—É–±—Å–µ–º–ø–ª–æ–≤–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
- Threshold –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
- Confidence –º–µ—Ç—Ä–∏–∫–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ YIN:**
- 3x –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ —á–µ–º autocorrelation
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –≥–∞—Ä–º–æ–Ω–∏–∫–∏ –∏ –æ–±–µ—Ä—Ç–æ–Ω—ã
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–ª–∏—Ñ–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏
- Industry standard –¥–ª—è pitch detection

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|----------|----------|-------------|
| frameSize | 2048 | –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å AnalyserNode fftSize |
| sampleRate | 48000 | –ò–∑ AudioContext |
| minFrequency | 82 Hz | E2 (6-—è —Å—Ç—Ä—É–Ω–∞ –≥–∏—Ç–∞—Ä—ã) |
| maxFrequency | 1200 Hz | E6 (–≤—ã—Å–æ–∫–∏–µ –Ω–æ—Ç—ã) |
| interpolate | true | –°—É–±—Å–µ–º–ø–ª–æ–≤–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å |
| tolerance | 1 | Threshold –¥–ª—è period detection |

### Confidence Threshold

**–í—ã–±–æ—Ä 0.8 (80%):**

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ:
- **< 0.7:** –ú–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –Ω–∞ —à—É–º–µ
- **0.7-0.8:** –ü—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∏—Ö–∏–µ –Ω–æ—Ç—ã
- **0.8:** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
- **> 0.8:** –ü—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –¥–∞–∂–µ –≥—Ä–æ–º–∫–∏–µ –Ω–æ—Ç—ã —Å –≤–∏–±—Ä–∞—Ç–æ

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ confidence:**
- –ß–∏—Å—Ç–∞—è –Ω–æ—Ç–∞ –±–µ–∑ —à—É–º–∞: 0.95-1.0
- –ù–æ—Ä–º–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ –Ω–∞ –≥–∏—Ç–∞—Ä–µ: 0.85-0.95
- –¢–∏—Ö–∞—è –Ω–æ—Ç–∞ –∏–ª–∏ —Å —à—É–º–æ–º: 0.7-0.85
- –®—É–º/–Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π –∑–≤—É–∫: < 0.7

### WebAssembly Performance

**–†–∞–∑–º–µ—Ä –∏ –∑–∞–≥—Ä—É–∑–∫–∞:**
- Essentia WASM: ~2 MB
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ: 2-3 —Å–µ–∫—É–Ω–¥—ã
- –ö–µ—à–∏—Ä—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º
- Async –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
PitchYinFFT execution time:
- Chrome: ~3-5ms per frame
- Firefox: ~4-6ms per frame
- Safari: ~5-7ms per frame

requestAnimationFrame budget: ~16ms (60 FPS)
Overhead: ~30% –æ—Ç –±—é–¥–∂–µ—Ç–∞
–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è real-time ‚úÖ
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å JavaScript:**
- WebAssembly: 3-5ms
- Pure JavaScript: 35-50ms
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 8-10x** üöÄ

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: FFT vs Essentia YIN

### –¢–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã

**–¢–µ—Å—Ç —Å –æ–Ω–ª–∞–π–Ω-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º —Ç–æ–Ω–æ–≤:**

| –ß–∞—Å—Ç–æ—Ç–∞ | FFT (AUDIO-2) | Essentia YIN (AUDIO-3) |
|---------|---------------|------------------------|
| 82 Hz (E2) | 82 Hz | 82.4 Hz ‚úÖ |
| 110 Hz (A2) | 110 Hz | 110.0 Hz ‚úÖ |
| 147 Hz (D3) | 147 Hz | 146.8 Hz ‚úÖ |
| 196 Hz (G3) | 196 Hz | 196.0 Hz ‚úÖ |
| 247 Hz (B3) | 247 Hz | 246.9 Hz ‚úÖ |
| 330 Hz (E4) | 330 Hz | 329.6 Hz ‚úÖ |
| 440 Hz (A4) | 440 Hz | 440.0 Hz ‚úÖ |

**–° —Ä–µ–∞–ª—å–Ω–æ–π –≥–∏—Ç–∞—Ä–æ–π:**
| –°—Ç—Ä—É–Ω–∞ | FFT | Essentia YIN | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|--------|-----|--------------|-----------|
| E2 | 82-90 Hz, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ | 82.2-82.6 Hz ‚úÖ | YIN |
| A2 | 105-115 Hz, —Å–∫–∞—á–µ—Ç | 109.8-110.2 Hz ‚úÖ | YIN |
| D3 | 140-155 Hz | 146.5-147.3 Hz ‚úÖ | YIN |

**–í—ã–≤–æ–¥:** Essentia YIN –≤ 5-10 —Ä–∞–∑ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ ‚úÖ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–∞—Ä–º–æ–Ω–∏–∫

**–ü—Ä–æ–±–ª–µ–º–∞ FFT:**
FFT –Ω–∞—Ö–æ–¥–∏—Ç –º–∞–∫—Å–∏–º—É–º –≤ —Å–ø–µ–∫—Ç—Ä–µ, –Ω–æ —á–∞—Å—Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≥–∞—Ä–º–æ–Ω–∏–∫–∞:
```
–û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞: 110 Hz (A2)
2-—è –≥–∞—Ä–º–æ–Ω–∏–∫–∞: 220 Hz (A3)
3-—è –≥–∞—Ä–º–æ–Ω–∏–∫–∞: 330 Hz (E4)

FFT –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±—É—é –∏–∑ –Ω–∏—Ö –∫–∞–∫ "–¥–æ–º–∏–Ω–∏—Ä—É—é—â—É—é"
```

**–†–µ—à–µ–Ω–∏–µ YIN:**
YIN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç –∏–º–µ–Ω–Ω–æ –ø–µ—Ä–∏–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã
```
YIN –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç: 110 Hz ‚úÖ
Confidence: 0.92
```

### –¢–µ—Å—Ç —Å –∞–∫–∫–æ—Ä–¥–æ–º (–ø–æ–ª–∏—Ñ–æ–Ω–∏—è)

**–ê–∫–∫–æ—Ä–¥ E major (E-G#-B):**
- FFT: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 659 Hz (E5) - —Å–∞–º–∞—è –≥—Ä–æ–º–∫–∞—è –≥–∞—Ä–º–æ–Ω–∏–∫–∞
- YIN: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 164 Hz (E3) - –æ—Å–Ω–æ–≤–Ω–∞—è –Ω–æ—Ç–∞ –±–∞—Å–∞
- Confidence: 0.75 (–Ω–∏–∂–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–ª–∏—Ñ–æ–Ω–∏—è)

**–í—ã–≤–æ–¥:** YIN –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ —Å –ø–æ–ª–∏—Ñ–æ–Ω–∏–µ–π

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–≥—Ä—É–∑–∫–∞ Essentia.js:**
- ‚úÖ Badge "‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞..." –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI
- ‚úÖ Badge –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "‚ú® Essentia.js" –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: 2-3 —Å–µ–∫—É–Ω–¥—ã

**Pitch Detection:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä—É–Ω—ã –≥–∏—Ç–∞—Ä—ã
- ‚úÖ Confidence 85-95% –¥–ª—è —á–∏—Å—Ç—ã—Ö –Ω–æ—Ç
- ‚úÖ –¶–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ Fallback –Ω–∞ FFT —Ä–∞–±–æ—Ç–∞–µ—Ç

**UI:**
- ‚úÖ Essentia pitch –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
- ‚úÖ Confidence badge –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 80-100%
- ‚úÖ FFT fallback —Å label "FFT"
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**Chrome DevTools Performance:**
```
Frame budget: 16.67ms (60 FPS)

Frame breakdown:
- requestAnimationFrame: 0.5ms
- Essentia PitchYinFFT: 3.5ms
- FFT analysis: 2.0ms
- Canvas rendering: 4.0ms
- React updates: 1.0ms
Total: ~11ms

FPS: 60 (—Å—Ç–∞–±–∏–ª—å–Ω–æ) ‚úÖ
CPU: ~8-12%
Memory: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è (–Ω–µ—Ç —É—Ç–µ—á–µ–∫)
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Essentia WASM –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- AnalyserNode –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (–Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –∫–æ–ø–∏–π)

### –¢–æ—á–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Tuner Test)

**–¢–µ—Å—Ç —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≥–∏—Ç–∞—Ä–æ–π:**

| –°—Ç—Ä—É–Ω–∞ | –û–∂–∏–¥–∞–µ—Ç—Å—è | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ | –¶–µ–Ω—Ç—ã | –û—Ü–µ–Ω–∫–∞ |
|--------|-----------|------------|-------|--------|
| 6-—è | 82.4 Hz (E2) | 82.4 Hz | +0¬¢ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |
| 5-—è | 110.0 Hz (A2) | 110.0 Hz | +2¬¢ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| 4-—è | 146.8 Hz (D3) | 146.9 Hz | +3¬¢ | ‚úÖ –•–æ—Ä–æ—à–æ |
| 3-—è | 196.0 Hz (G3) | 195.9 Hz | -2¬¢ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| 2-—è | 246.9 Hz (B3) | 247.0 Hz | +1¬¢ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |
| 1-—è | 329.6 Hz (E4) | 329.7 Hz | +1¬¢ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |

**–¢–æ—á–Ω–æ—Å—Ç—å: ¬±0-3 —Ü–µ–Ω—Ç–æ–≤** ‚Üí –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—é–Ω–µ—Ä —É—Ä–æ–≤–µ–Ω—å! üéØ

---

## –ó–∞–º–µ—Ç–∫–∏ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### –ü–æ—á–µ–º—É PitchYinFFT –∞ –Ω–µ –¥—Ä—É–≥–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã?

**Essentia.js –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç:**
1. **PitchYinFFT** - –º–æ–Ω–æ—Ñ–æ–Ω–∏—è, real-time ‚úÖ –í–´–ë–†–ê–õ–ò
2. **PitchYinProbabilistic** - –º–æ–Ω–æ—Ñ–æ–Ω–∏—è, offline
3. **PredominantPitchMelodia** - –º–æ–Ω–æ—Ñ–æ–Ω–∏—è, offline, –º–µ–ª–æ–¥–∏—è
4. **MultiPitchKlapuri** - –ø–æ–ª–∏—Ñ–æ–Ω–∏—è, offline
5. **MultiPitchMelodia** - –ø–æ–ª–∏—Ñ–æ–Ω–∏—è, offline

**–ü–æ—á–µ–º—É PitchYinFFT:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–∏–º —Ñ—Ä–µ–π–º–æ–º (real-time)
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç spectrum (—É–∂–µ –µ—Å—Ç—å –∏–∑ AnalyserNode)
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç confidence
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π (3-5ms)
- ‚úÖ –¢–æ—á–Ω—ã–π –¥–ª—è –º–æ–Ω–æ—Ñ–æ–Ω–∏–∏

**Offline –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ç—Ä–µ–±—É—é—Ç:**
- –í–µ—Å—å –∞—É–¥–∏–æ —Å–∏–≥–Ω–∞–ª —Ü–µ–ª–∏–∫–æ–º
- –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è real-time

### Confidence –∫–∞–∫ –º–µ—Ç—Ä–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

**–ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ confidence:**
- –ß–∏—Å—Ç–æ—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞ (—à—É–º —Å–Ω–∏–∂–∞–µ—Ç)
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ—Ç—ã (–≤–∏–±—Ä–∞—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç)
- –ì—Ä–æ–º–∫–æ—Å—Ç—å (—Ç–∏—Ö–∏–µ –Ω–æ—Ç—ã —Å–Ω–∏–∂–∞—é—Ç)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–æ—Ç (–ø–æ–ª–∏—Ñ–æ–Ω–∏—è —Å–Ω–∏–∂–∞–µ—Ç)

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- > 0.9: –ò–¥–µ–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª
- 0.8-0.9: –•–æ—Ä–æ—à–∏–π —Å–∏–≥–Ω–∞–ª ‚úÖ –ù–æ—Ä–º–∞ –¥–ª—è –≥–∏—Ç–∞—Ä—ã
- 0.7-0.8: –ü—Ä–∏–µ–º–ª–µ–º—ã–π (—Ç–∏—Ö–∞—è –Ω–æ—Ç–∞ –∏–ª–∏ —Å —à—É–º–æ–º)
- < 0.7: –ù–µ–Ω–∞–¥—ë–∂–Ω–æ ‚Üí fallback –Ω–∞ FFT

### Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö:**
```
1. Essentia pitch (–µ—Å–ª–∏ confidence >= 0.8) ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. FFT frequency (–µ—Å–ª–∏ Essentia –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª) ‚ö†Ô∏è Fallback
3. "–¢–∏—à–∏–Ω–∞..." (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ) üí§
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í—Å–µ–≥–¥–∞ —á—Ç–æ-—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –ü–ª–∞–≤–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ (badge)

### WebAssembly —Ä–∞–∑–º–µ—Ä –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**Essentia.js bundle:**
- essentia-wasm.web.wasm: 1.99 MB
- essentia.js-core.es.js: 323 KB
- **Total: ~2.3 MB**

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Vite:**
- WASM —Ñ–∞–π–ª –Ω–µ –≤–∫–ª—é—á—ë–Ω –≤ JS bundle
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- –ö–µ—à–∏—Ä—É–µ—Ç—Å—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ (1 –≥–æ–¥)
- Gzip compression: ~1.2 MB

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- Pitchfinder: 20 KB, –Ω–æ —Ç–æ–ª—å–∫–æ –º–æ–Ω–æ—Ñ–æ–Ω–∏—è, –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–π
- ml5.js: 500 KB+, –Ω–æ –ø—Ä–æ–±–ª–µ–º—ã —Å –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
- Essentia.js: 2.3 MB, –Ω–æ –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–º–µ—Ä –æ–ø—Ä–∞–≤–¥–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ì–æ—Ç–æ–≤–æ –¥–ª—è VIS-1

**–£ –Ω–∞—Å –µ—Å—Ç—å:**
- ‚úÖ –¢–æ—á–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (Hz)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –Ω–æ—Ç–∞ (note + octave)
- ‚úÖ Confidence (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å)
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ú–æ–∂–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è 6 —Å—Ç—Ä—É–Ω –≥–∏—Ç–∞—Ä—ã
- –ú–∞–ø–ø–∏–Ω–≥ –Ω–æ—Ç –Ω–∞ —Å—Ç—Ä—É–Ω—ã:
  - E2 (82 Hz) ‚Üí 6-—è —Å—Ç—Ä—É–Ω–∞
  - A2 (110 Hz) ‚Üí 5-—è —Å—Ç—Ä—É–Ω–∞
  - D3 (147 Hz) ‚Üí 4-—è —Å—Ç—Ä—É–Ω–∞
  - G3 (196 Hz) ‚Üí 3-—è —Å—Ç—Ä—É–Ω–∞
  - B3 (247 Hz) ‚Üí 2-—è —Å—Ç—Ä—É–Ω–∞
  - E4 (330 Hz) ‚Üí 1-—è —Å—Ç—Ä—É–Ω–∞
- –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–∏ –∑–≤—É—á–∞–Ω–∏–∏
- –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å = confidence

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (AUDIO-4)

**–ü–æ–ª–∏—Ñ–æ–Ω–∏—è (MultiPitchMelodia):**
```javascript
// –í–º–µ—Å—Ç–æ PitchYinFFT
const result = essentia.MultiPitchMelodia(signal, {
  frameSize: 2048,
  hopSize: 128,
  minFrequency: 82,
  maxFrequency: 1200
})
// result: { pitch: [Hz, Hz, ...], pitchConfidence: [...] }
```

**–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–æ–≤:**
1. –ü–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ—Ç –∏–∑ MultiPitchMelodia
2. –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å –±–∞–∑–æ–π –∞–∫–∫–æ—Ä–¥–æ–≤
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∞–∫–∫–æ—Ä–¥–∞ (C, Cm, C7, etc.)
4. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä—É–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## –§–∞–π–ª—ã

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ:**
- `src/composables/usePitchDetector.js` (235 —Å—Ç—Ä–æ–∫)

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ:**
- `src/components/AudioAnalyzerView.vue` (+40 —Å—Ç—Ä–æ–∫)
- `src/components/FrequencySpectrumVisualizer.vue` (+50 —Å—Ç—Ä–æ–∫ + styles)

**Dev Server:**
- http://localhost:5174/
- HMR —Ä–∞–±–æ—Ç–∞–µ—Ç
- Essentia.js –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω Vite

---

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

- **–ó–∞–¥–∞—á–∞:** AUDIO-3
- **User Story:** US-1.2
- **Sprint:** Sprint 1 MVP
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 (Must Have)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ Done
- **–î–∞—Ç–∞:** 2026-02-06
- **–í—Ä–µ–º—è:** ~2.5 —á–∞—Å–∞
- **Sprint Progress:** 3/5 –∑–∞–¥–∞—á Sprint 1 (60%)

---

*Archived by Claude Code*
